# Загрузка в редиску

Файл r.py - чтение и очистка данных, преобразование данных, запись данных в Redis.

```r.py``` поместить в одну директорию с датасетом. Пример:

* ./telecom10k/*
* ./telecom100k/*
* ./telecom1000k/*
* ./r.py

В конце файла можно прописать путь к интересуемому датасету:
```commandline
if __name__ == "__main__":
    file_pattern = 'telecom100k/*'
    process_files(file_pattern)
```

**ВАЖНО**

Для корректной работы программы из папки с датасетом необходимо удалить ВСЕ файлы, кроме тех, которые начинаются с psx_*

## Подключение к БД Redis

Установка и запуск Redis:

```commandline
docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest
```

В начале ```r.py``` есть строка для подключения к БД. При необходимости можно изменить параметры подключения (указаны по умолчанию)

```commandline
r = redis.Redis(host='localhost', port=6379, db=0)
```

В Redis помещаются витрины данных за каждый час для каждого из шести сетевых устройств. Их можно получить по ключу вида:

3 2024-01-01 00:00:00

Где:
3 - IdPSX
2024-01-01 00:00:00 - Дата и время начала часа, для которого подготовлены данные

Когда сделаете таблицу со взломанными пользователями, засуньте их в dataframe и прогоните через функцию load() 

## TODO: Графики

* Для каждого устройства (IdPSX) получить сумму трафика и нарисовать его во времени
* Для пользователей, которых взломали: трафик во времени
* Общий трафик во времени

При этом под трафиком может пониматься:

* UpTx
* DownTx
* UpTx + DownTx
* UpTx - DownTx
